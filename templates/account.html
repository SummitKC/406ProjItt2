{% extends "layout.html" %}
{% block title %} Account {% endblock %}

{% block main %}
    
    <table class="table table-striped">
        <thead>
            <tr>
                <th>Class</th>
                <th>Registration</th>
            </tr>
        </thead>
        
        {% for week in weeks %}
            <tr>
                <td>Week {{ week }}</td>
                <td>
                    {% if (week in status) and (status[week][1] != 0) %}
                    <p> You Have Already Paid</p>
                    {% else %}

                        {% if paid == false %}
                            <form method="GET" action="/payment">
                                <input type="hidden" name="week" value="{{ week }}">
                                <button type="submit" class="btn btn-primary">Register and Pay</button>
                            </form>
                        {% else %}

                            <form method="GET" action="/payment">
                                <input type="hidden" name="week" value="{{ week }}">
                                <button type="submit" class="btn btn-primary">Register and Pay</button>
                            </form>
                            <form method="PUT" action="/account">
                                <button type="submit" name="{{ week }}" class="btn btn-primary">Register Now</button>
                            </form>
                        {% endif %}
                    {% endif %}

                </td>
            </tr>
        {% endfor %}
    </table>

    <script>
        function confirmUpdate(week, price) {
            // Display a confirmation dialog
            var msg = "Are you sure you want to register for week " + week + " for $" + price + "?";
            var confirmed = confirm(msg);
            return confirmed;
        }
    </script>

{% endblock %}