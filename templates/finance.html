{% extends "layout.html" %}

{% block title %} Finances {% endblock %}

{% block main %}
  <br>
    <div class="center">
        <h1>Financial Information</h1>
        <table class="table">
          <tr>
            <td>Lifetime Profit</td>
            <td>{{ lt_profit }}</td>
          </tr>
          <tr>
            <td>Lifetime Income</td>
            <td>{{ lt_income }}</td>
          </tr>
          <tr>
            <td>Lifetime Expenses</td>
            <td>{{ lt_expenses }}</td>
          </tr>
        </table>
        <table class="table">
            <thead>
                <tr>
                    <th scope="col">Month</th>
                    <th scope="col">Income</th>
                    <th scope="col">Expenses</th>
                    <th scope="col">Profit</th>
                </tr>
            </thead>
            <tbody>    
                {% for month in finance_info %}
                <tr>
                    <td>{{ month.month_year }}</td>
                    <td>{{ month.calculate_total_income() }}
                      <table class="table">
                        <thead>
                          <tr>
                              <th scope="col">Member Income</th>
                              <th scope="col">Other Income</th>
                          </tr>
                      </thead>
                        <tbody>
                          <tr>  
                            <td>{{ month.income_users }}</td>
                            <td>{{ month.income_other }}</td>
                          </tr>
                        </tbody>
                      </table>
                    </td> <!-- change to month.income when db is changed-->
                    <td>{{ month.calculate_total_expenses() }}
                      <table class="table">
                        <thead>
                          <tr>
                              <th scope="col">Coach Expenses</th>
                              <th scope="col">Hall Expenses</th>
                              <th scope="col">Other Expenses</th>
                          </tr>
                      </thead>
                        <tbody>
                          <tr>  
                            <td>{{ month.expenses_coach }}</td>
                            <td>{{ month.expenses_hall }}</td>
                            <td>{{ month.expenses_other }}</td>
                          </tr>
                        </tbody>
                      </table>
                    </td>
                    <td>{{ month.calculate_profit() }} </td>
                    
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
        
{% endblock %}
